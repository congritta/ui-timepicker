"use strict";import{jsx as s,jsxs as L}from"react/jsx-runtime";import{useEffect as D,useRef as k,useState as r}from"react";import n from"./index.module.css";const w=210,R=10,W=1;function o(t){return`${t<=9?"0":""}${t}`}export default function B(t){const l=k(null),c=k(null),[i,N]=r(t.value),[u,d]=r(!1),[h,m]=r(!u),[p,b]=r({top:!1,left:!1});function C(){P(),m(!1),setTimeout(()=>{d(!0),window.addEventListener("click",v)},0)}function v(e){e?.target&&l.current?.contains(e.target)||(d(!1),setTimeout(()=>{window.removeEventListener("click",v)},0),setTimeout(()=>{m(!0)},t.transitionDuration??w))}function P(){setTimeout(()=>{const e=l.current?.getBoundingClientRect(),a=c.current?.getBoundingClientRect();if(!e||!a)throw new Error("No rect found");const g=t.gapBetweenInputWrapperAndPicker??R,{height:T}=a;b({top:e.top+e.height+g+T>window.innerHeight,left:e.left+e.width+g>window.innerWidth})},0)}D(()=>{N(t.value)},[t.value]);const y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],f=[];for(let e=0;e<60;e+=t.minutesStep??W)f.push(e);return L("div",{ref:l,className:[n.TimePicker,...u?["_isOpened"]:[]].join(" "),style:{"--transition-duration":`${t.transitionDuration??w}ms`,"--gap-between-input-wrapper-and-picker":`${t.gapBetweenInputWrapperAndPicker??R}px`},children:[s("div",{className:n.inputWrapper,onClick:()=>u?null:C(),children:s("input",{type:"text",value:`${o(i[0])}:${o(i[1])}`,readOnly:!0})}),L("div",{ref:c,className:[n.picker,...p.top?["_isRevealedFromBottom"]:[],...p.left?["_isRevealedFromRight"]:[],...h?["_isRemovedFromLayout"]:[]].join(" "),children:[s("div",{className:n.valuesList,children:y.map((e,a)=>s("div",{className:[n.valuesListValue,...i[0]===e?["_isSelected"]:[]].join(" "),onClick:()=>t.onUpdate([e,i[1]]),children:o(e)},a))}),s("div",{className:n.valuesList,children:f.map((e,a)=>s("div",{className:[n.valuesListValue,...i[1]===e?["_isSelected"]:[]].join(" "),onClick:()=>t.onUpdate([i[0],e]),children:o(e)},a))})]})]})}
