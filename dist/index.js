"use strict";import{jsx as s,jsxs as L}from"react/jsx-runtime";import{useEffect as W,useRef as N,useState as l}from"react";import i from"./index.module.css";const C=210,w=10,D=1;function r(e){return`${e<=9?"0":""}${e}`}export default function B(e){const u=N(null),c=N(null),[n,R]=l(e.value),[o,m]=l(!1),[d,v]=l(!o),[f,P]=l({top:!1,left:!1});function h(){b(),v(!1),setTimeout(()=>{m(!0),window.addEventListener("click",k)},0)}function k(t){t?.target&&u.current?.contains(t.target)||(m(!1),setTimeout(()=>{window.removeEventListener("click",k)},0),setTimeout(()=>{v(!0)},e.transitionDuration??C))}function b(){setTimeout(()=>{const t=u.current?.getBoundingClientRect(),a=c.current?.getBoundingClientRect();if(!t||!a)throw new Error("No rect found");const g=e.gapBetweenInputWrapperAndPicker??w,{height:T}=a;P({top:t.top+t.height+g+T>window.innerHeight,left:t.left+t.width+g>window.innerWidth})},0)}W(()=>{R(e.value)},[e.value]);const y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],p=[];for(let t=0;t<60;t+=e.minutesStep??D)p.push(t);return L("div",{ref:u,className:[i.TimePicker,...o?["_isOpened"]:[],...e.timePickerClassName?[e.timePickerClassName]:[]].join(" "),style:{"--transition-duration":`${e.transitionDuration??C}ms`,"--gap-between-input-wrapper-and-picker":`${e.gapBetweenInputWrapperAndPicker??w}px`},children:[s("div",{className:[i.inputWrapper,...e.inputWrapperClassName?[e.inputWrapperClassName]:[]].join(" "),onClick:()=>o?null:h(),children:s("input",{type:"text",value:`${r(n[0])}:${r(n[1])}`,readOnly:!0})}),L("div",{ref:c,className:[i.picker,...f.top?["_isRevealedFromBottom"]:[],...f.left?["_isRevealedFromRight"]:[],...d?["_isRemovedFromLayout"]:[],...e.pickerClassName?[e.pickerClassName]:[]].join(" "),style:{zIndex:d?void 0:999999},children:[s("div",{className:[i.valuesList,...e.valuesListClassName?[e.valuesListClassName]:[]].join(" "),children:y.map((t,a)=>s("div",{className:[i.valuesListValue,...n[0]===t?["_isSelected"]:[],...e.valuesListValueClassName?[e.valuesListValueClassName]:[]].join(" "),onClick:()=>e.onUpdate([t,n[1]]),children:r(t)},a))}),s("div",{className:i.valuesList,children:p.map((t,a)=>s("div",{className:[i.valuesListValue,...n[1]===t?["_isSelected"]:[]].join(" "),onClick:()=>e.onUpdate([n[0],t]),children:r(t)},a))})]})]})}
